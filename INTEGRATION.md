# üîå –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–í–∞—Ä–∏–∞–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#–≤–∞—Ä–∏–∞–Ω—Ç—ã-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
2. [REST API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](#rest-api-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
3. [Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞](#python-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
4. [Docker –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](#docker-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
5. [Elasticsearch –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](#elasticsearch-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
6. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

## –í–∞—Ä–∏–∞–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1. REST API (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å REST API —á–µ—Ä–µ–∑ HTTP –∑–∞–ø—Ä–æ—Å—ã.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —è–∑—ã–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –æ—Ç–ª–∞–¥–∫–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –°–µ—Ç–µ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç HTTP —Å–µ—Ä–≤–µ—Ä

### 2. Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

–ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Python –∫–ª–∞—Å—Å–æ–≤.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ—Ç —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- ‚úÖ –ú–æ–∂–Ω–æ –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –¢–æ–ª—å–∫–æ Python
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 3. Docker Compose

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–∞–∫ Docker —Å–µ—Ä–≤–∏—Å.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è
- ‚úÖ –õ–µ–≥–∫–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

## REST API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```python
import requests

class HybridSearchClient:
    def __init__(self, api_url="http://localhost:8005"):
        self.api_url = api_url
    
    def search(self, query: str, limit: int = 10):
        """–í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫"""
        response = requests.post(
            f"{self.api_url}/search",
            json={"query": query, "limit": limit},
            timeout=30
        )
        response.raise_for_status()
        return response.json()
    
    def health_check(self):
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ API"""
        response = requests.get(f"{self.api_url}/health")
        return response.json()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
client = HybridSearchClient()

# –ü–æ–∏—Å–∫
results = client.search("–ø–æ–∫–∞–∂–∏ –≤—Ö–æ–¥—è—â–∏–µ –¥–∏–∞–ª–æ–≥–∏", limit=10)
for item in results["results"]:
    print(f"{item['call_id']} - {item['operator_name']}")
    print(f"–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: {item['relevance_score']:.2f}")
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```python
from flask import Flask, request, jsonify
from hybrid_search_client import HybridSearchClient

app = Flask(__name__)
search_client = HybridSearchClient("http://hybrid-search-api:8005")

@app.route("/api/search", methods=["POST"])
def search():
    data = request.json
    query = data.get("query", "")
    limit = data.get("limit", 10)
    
    results = search_client.search(query, limit)
    return jsonify(results)
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```python
# views.py
from django.http import JsonResponse
from hybrid_search_client import HybridSearchClient

search_client = HybridSearchClient()

def search_view(request):
    query = request.GET.get('q', '')
    limit = int(request.GET.get('limit', 10))
    
    results = search_client.search(query, limit)
    return JsonResponse(results)
```

## Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

### –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from hybrid_search import HybridSearchEngine
from elasticsearch import Elasticsearch

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
engine = HybridSearchEngine(
    elasticsearch_url="http://localhost:9200",
    llm_url="http://localhost:1234",  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    embedding_model=None  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
)

# –ü–æ–∏—Å–∫
results = engine.search("–Ω–µ–¥–æ–≤–æ–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç", limit=10)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
for item in results["results"]:
    print(f"Call ID: {item['call_id']}")
    print(f"–û–ø–µ—Ä–∞—Ç–æ—Ä: {item['operator_name']}")
    print(f"–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: {item['semantic_score']:.2f}")
    print(f"–ü—Ä–∏—á–∏–Ω–∞: {item['relevance_reason']}")
    print(f"Breakdown: {item['score_breakdown']}")
```

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤

```python
# –ò–∑–º–µ–Ω–∏—Ç—å –≤–µ—Å–∞ –ø–æ–¥ –≤–∞—à–∏ –∑–∞–¥–∞—á–∏
engine.update_weights({
    'bm25': 0.40,           # –ë–æ–ª—å—à–µ –≤–µ—Å–∞ –Ω–∞ BM25
    'semantic': 0.20,
    'keyword_density': 0.25,
    'exact_match': 0.10,
    'context_boost': 0.05
})
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```python
from hybrid_search import QueryAnalyzer, KeywordDensityScorer

# –ê–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–∞
analyzer = QueryAnalyzer("http://localhost:1234")
analysis = analyzer.analyze("–ø–æ–∫–∞–∂–∏ –≤—Ö–æ–¥—è—â–∏–µ –¥–∏–∞–ª–æ–≥–∏")
print(f"Intent: {analysis['intent']}")
print(f"Keywords: {analysis['keywords']}")

# –ü–æ–¥—Å—á–µ—Ç –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
scorer = KeywordDensityScorer()
score = scorer.score(
    ["–≤—Ö–æ–¥—è—â–∏–µ", "–¥–∏–∞–ª–æ–≥–∏"],
    "–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞..."
)
print(f"Density: {score['density_score']}")
```

## Docker –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π docker-compose.yml

```yaml
version: '3.8'

services:
  # –í–∞—à–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã
  your_app:
    # ...
  
  # –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫
  hybrid_search:
    build: ./hybrid_search_engine
    container_name: hybrid_search_api
    ports:
      - "8005:8000"
    environment:
      - ELASTICSEARCH_URL=http://elasticsearch:9200
      - LLM_URL=http://host.docker.internal:1234
      - EMBEDDING_MODEL_PATH=/models/embeddings/intfloat_multilingual-e5-large
    volumes:
      - ./models:/models
    depends_on:
      - elasticsearch
    networks:
      - your_network
  
  # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Elasticsearch –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π
  elasticsearch:
    image: elasticsearch:8.11.0
    # ... –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

networks:
  your_network:
    driver: bridge
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ —á–µ—Ä–µ–∑ Docker —Å–µ—Ç—å

```python
import requests

# –í–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏
api_url = "http://hybrid_search:8000"

# –° —Ö–æ—Å—Ç–∞
api_url = "http://localhost:8005"
```

## Elasticsearch –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∏–Ω–¥–µ–∫—Å

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å Elasticsearch —Å –¥–∞–Ω–Ω—ã–º–∏:

```python
from hybrid_search import HybridSearchEngine

# –ü—Ä–æ—Å—Ç–æ —É–∫–∞–∂–∏—Ç–µ URL –≤–∞—à–µ–≥–æ Elasticsearch
engine = HybridSearchEngine(
    elasticsearch_url="http://your-elasticsearch:9200",
    llm_url=None,  # –ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ LLM
    embedding_model=None  # –ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ embeddings
)

# –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç –∏–Ω–¥–µ–∫—Å –∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
results = engine.search("–≤–∞—à –∑–∞–ø—Ä–æ—Å")
```

### –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```python
from elasticsearch import Elasticsearch
from elasticsearch.helpers import bulk

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—Ç–∞—Ä–æ–º—É Elasticsearch
old_es = Elasticsearch(["http://old-es:9200"])

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–æ–≤–æ–º—É
new_es = Elasticsearch(["http://new-es:9200"])

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã
old_index = "old_dialogues"
new_index = "call_dialogues"

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
query = {"query": {"match_all": {}}}
scroll = old_es.search(index=old_index, scroll="2m", size=1000, body=query)
sid = scroll['_scroll_id']
scroll_size = len(scroll['hits']['hits'])

actions = []
while scroll_size > 0:
    for doc in scroll['hits']['hits']:
        actions.append({
            "_index": new_index,
            "_id": doc['_id'],
            "_source": doc['_source']
        })
    
    scroll = old_es.scroll(scroll_id=sid, scroll="2m")
    sid = scroll['_scroll_id']
    scroll_size = len(scroll['hits']['hits'])

# Bulk –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
bulk(new_es, actions)
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–∏—Å–∫ –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

```python
# app.py (Flask)
from flask import Flask, render_template, request, jsonify
from hybrid_search_client import HybridSearchClient

app = Flask(__name__)
client = HybridSearchClient("http://localhost:8005")

@app.route("/")
def index():
    return render_template("search.html")

@app.route("/api/search", methods=["POST"])
def api_search():
    query = request.json.get("query", "")
    limit = request.json.get("limit", 10)
    
    results = client.search(query, limit)
    return jsonify(results)
```

```html
<!-- templates/search.html -->
<!DOCTYPE html>
<html>
<head>
    <title>–ü–æ–∏—Å–∫</title>
</head>
<body>
    <input type="text" id="searchInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å...">
    <button onclick="search()">–ü–æ–∏—Å–∫</button>
    
    <div id="results"></div>
    
    <script>
    async function search() {
        const query = document.getElementById('searchInput').value;
        const response = await fetch('/api/search', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({query: query, limit: 10})
        });
        const data = await response.json();
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = data.results.map(r => `
            <div>
                <h3>${r.call_id} - ${r.operator_name}</h3>
                <p>–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: ${r.relevance_score.toFixed(2)}</p>
                <p>${r.text_summary}</p>
            </div>
        `).join('');
    }
    </script>
</body>
</html>
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

```python
from hybrid_search import HybridSearchEngine

engine = HybridSearchEngine(...)

queries = [
    "–ø–æ–∫–∞–∂–∏ –≤—Ö–æ–¥—è—â–∏–µ –¥–∏–∞–ª–æ–≥–∏",
    "–Ω–µ–¥–æ–≤–æ–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç",
    "–ø—Ä–æ–±–ª–µ–º—ã —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º",
    "–≥–¥–µ –∫–ª–∏–µ–Ω—Ç –Ω–∏—á–µ–≥–æ –Ω–µ –∫—É–ø–∏–ª"
]

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
results_batch = []
for query in queries:
    result = engine.search(query, limit=5)
    results_batch.append({
        "query": query,
        "results": result["results"],
        "total": result["total"]
    })

# –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
for batch in results_batch:
    print(f"–ó–∞–ø—Ä–æ—Å: {batch['query']}")
    print(f"–ù–∞–π–¥–µ–Ω–æ: {batch['total']}")
    for r in batch['results'][:3]:
        print(f"  - {r['call_id']} (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: {r['semantic_score']:.2f})")
```

### –ü—Ä–∏–º–µ—Ä 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ–∏—Å–∫–∞

```python
from hybrid_search import HybridSearchEngine
import json

engine = HybridSearchEngine(...)

# –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –æ–∂–∏–¥–∞–µ–º—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
test_cases = [
    {
        "query": "–ø–æ–∫–∞–∂–∏ –≤—Ö–æ–¥—è—â–∏–µ –¥–∏–∞–ª–æ–≥–∏",
        "expected_call_type": "–í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫",
        "min_relevance": 50
    },
    {
        "query": "–Ω–µ–¥–æ–≤–æ–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç",
        "expected_problem": True,
        "min_relevance": 40
    }
]

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
for test in test_cases:
    results = engine.search(test["query"], limit=10)
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
    first_result = results["results"][0] if results["results"] else None
    
    if first_result:
        relevance_ok = first_result['semantic_score'] >= test.get('min_relevance', 0)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –∑–≤–æ–Ω–∫–∞
        call_type_ok = True
        if 'expected_call_type' in test:
            call_type_ok = first_result['call_type'] == test['expected_call_type']
        
        print(f"–ó–∞–ø—Ä–æ—Å: {test['query']}")
        print(f"  –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: {'‚úÖ' if relevance_ok else '‚ùå'}")
        print(f"  –¢–∏–ø –∑–≤–æ–Ω–∫–∞: {'‚úÖ' if call_type_ok else '‚ùå'}")
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```python
from hybrid_search_client import HybridSearchClient
import requests

client = HybridSearchClient()

def safe_search(query: str, limit: int = 10):
    """–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–æ–∏—Å–∫ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫"""
    try:
        results = client.search(query, limit)
        return results
    except requests.exceptions.ConnectionError:
        return {"error": "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ API"}
    except requests.exceptions.Timeout:
        return {"error": "–¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞"}
    except requests.exceptions.HTTPError as e:
        return {"error": f"HTTP –æ—à–∏–±–∫–∞: {e}"}
    except Exception as e:
        return {"error": f"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞: {e}"}
```

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
from functools import lru_cache
import hashlib

@lru_cache(maxsize=1000)
def cached_search(query_hash: str):
    # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫—ç—à–∞
    pass

def search_with_cache(query: str, limit: int = 10):
    query_hash = hashlib.md5(f"{query}:{limit}".encode()).hexdigest()
    return cached_search(query_hash)
```

### 2. Rate Limiting

```python
from time import time

class RateLimitedClient:
    def __init__(self, max_requests=10, time_window=60):
        self.max_requests = max_requests
        self.time_window = time_window
        self.requests = []
    
    def search(self, query: str, limit: int = 10):
        now = time()
        # –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã
        self.requests = [r for r in self.requests if now - r < self.time_window]
        
        if len(self.requests) >= self.max_requests:
            raise Exception("Rate limit exceeded")
        
        self.requests.append(now)
        return client.search(query, limit)
```

### 3. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```python
import asyncio
import aiohttp

async def async_search(query: str, limit: int = 10):
    async with aiohttp.ClientSession() as session:
        async with session.post(
            "http://localhost:8005/search",
            json={"query": query, "limit": limit}
        ) as response:
            return await response.json()

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
async def batch_search(queries):
    tasks = [async_search(q) for q in queries]
    return await asyncio.gather(*tasks)
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:

1. **REST API** - –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
2. **Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞** - –¥–ª—è Python –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
3. **Docker —Å–µ—Ä–≤–∏—Å** - –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–∞—à–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã!

